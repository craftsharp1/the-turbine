input {
  file {
    path => "/home/jimsey/Development/projects/the-turbine/turbine/logs/json-quotes.log"
    #start_position => "beginning"
    type => "quote"
    codec => json
  }
}

filter {
  if [type] == "quote" {
    date {
      match => ["timestamp", "ISO8601"]
      target => "@timestamp"
    }
    date {
      match => ["[instrument][timestamp]", "ISO8601"]
      target => "[instrument][timestamp]"
    }
    date {
      match => ["[trader][timestamp]", "ISO8601"]
      target => "[trader][timestamp]"
    }

  }
}

#default jackson json date format: yyyy-MM-dd'T'HH:mm:ss.SSS

output {
  elasticsearch { host => localhost }
  stdout { codec => rubydebug }
}
